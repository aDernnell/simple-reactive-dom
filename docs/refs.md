# Refs

This page documents the element referencing system (`ref`), which allows you to associate DOM elements with keys for easy retrieval and manipulation.

## Description

Element referencing enables you to assign a key to any HTML element located inside a template using a `ref:<key>` attribute.  
This makes it easy to retrieve these elements, for example to apply behaviors or styles dynamically.

The utility function `getElementRefs` extracts all references from a root element and returns an object mapping each key to its corresponding element.

There are two modes for key resolution:

-   **Strict mode** (default): Case is ignored, but dashes (`-`) and underscores (`_`) are significant.
-   **Non-strict mode**: Case, dashes, and underscores are all ignored, so you can access a reference using different key variants.

After extraction, the `ref:<key>` attributes are removed from the DOM.

`getElementRefs` works for nodes generated by the `node()` function, but also for any HTML element in the DOM that has `ref:<key>` attributes in one of its children.

## Examples

### Referencing elements in HTML

```js
const containerEl = node(html`
    <div>
        <button ref:submit_btn>Send</button>
        <input ref:user_input type="text" />
    </div>`
);
const refs = getElementRefs(containerEl);
const submitBtn = refs.submit_btn as HTMLButtonElement; // Access the button element
const userInput = refs.user_input as HTMLInputElement; // Access the input element
```

!> Case is ignored by default so `<button ref:submitBtn>` is only accessible via `refs.submitbtn` and not `refs.submitBtn`.

### Using non-strict mode

```js
const refs = getElementRefs(root, { strictNames: false });
// refs.submitbtn, refs.submitBtn, refs.submit_btn, refs["submit-btn"], etc. are all equivalent
```

## API Reference

<big>**getElementRefs**(el: Element, options?: { strictNames: boolean }): { [key: string]: Element }</big>

Extracts all `ref:<key>` references from the root element `el` and returns an object mapping each key to its element.

_Options:_

-   `strictNames` (boolean, default: `true`):
    -   `true`: Case is ignored, but dashes and underscores are significant.
    -   `false`: Case, dashes, and underscores are all ignored (flexible key access).

_Returns:_

-   An object `{ [key]: Element }` containing the referenced elements.
-   In non-strict mode, the returned object is a Proxy allowing access via different key variants.
